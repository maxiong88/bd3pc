var loginJS = {
    ajaxTo:function(url, data, cb, err){
        $.ajax({
            type: 'get',
            url : url,
            data:data,
            dataType: 'json',
            success: function(res){
                res.status === 1 ? cb && cb(res) : err && err(res);
            }
        })
    },
    init:function(){
        var that = this;
        $('#_js_ChangePWD').on('click', function(){
            var username = $(this).parent().find('#username_c').val();
            var smscode = $(this).parent().find('.smscode_c').val();
            if(smscode === ''){
                $(this).parent().find('.from-smscode .err-tip').html('验证码不能为空').show();
                return;
            }
            that.ajaxTo('更改密码url', {
                username:username,
                smscode:smscode,
            }, function(res){
                alert(res.message)
            },function(res){
                alert(res.message)
            })
        });
        $('#_js_RegStep1').on('click', function(){
            $('.con-body').hide();
            $('.register-body-2').show();
        });
        // 点击图片上传
        $('#_js_file_upload').change(function(e){
            var file = e.target.files && e.target.files[0];
            
            if (!(/^image\/.*$/i.test(file.type))) {
                alert('请上传正确格式图片');
                return; //不是图片 就跳出这一次循环  
            }
            if (file.size > 500000) {
                alert('请上传小于500kb图片');
                return; //  大小 
            }
            $('.register-body-2 .item-3').html('')
            //实例化FileReader API  
            var freader = new FileReader();  
            freader.readAsDataURL(file);  
            freader.onload = function(e) {
                var img = new Image();
                img.src = e.target.result;
                $('.register-body-2 .item-3').html(img)
            } 
        })
        $('#_js_RegStep2').on('click', function(){
            
        });
        // 记住密码 == 这里要注入cookie
        $('#bd-checkbox-forget').on('change', function(){
            if($(this).hasClass('is-checked')){
                // 移除
                $(this).removeClass('is-checked');
                $(this).find('.bd-checkbox__input').removeClass('is-checked');
            }else{
                // 注入
                $(this).addClass('is-checked');
                $(this).find('.bd-checkbox__input').addClass('is-checked');
            }

        });
        // 忘记密码
        $('#forgetPass').on('click', function(){
            $('.con-body').hide();
            $('.forget-body').show();
        });
        // 登录
        $('#_js_login').on('click', function(){
            var username = $(this).parent().find('.username').val();
            var password = $(this).parent().find('.password').val();
            // ajax发送用户名，密码进行登录
            // $.ajax({ })
            // 模拟  ==输入登录成功
            if(username === ''){
                $(this).parent().find('.username + .err-tip').html('手机号不能为空').css("left","93px").show()
                return ;
            }else{
                $(this).parent().find('.username + .err-tip').html('').css("left","93px").hide()
            }
            if (!/^1[3|4|5|6|7|8|9]\d{9}$/.test(username)){
                $(this).parent().find('.username + .err-tip').html('请输入正确手机号').css("left","93px").show()
                return;
            }else{
                $(this).parent().find('.username + .err-tip').html('').css("left","93px").hide()
            }
            if(password === ''){
                $(this).parent().find('.password + .err-tip').html('密码不能为空').css("left","93px").show()
                return ;
            }else{
                $(this).parent().find('.password + .err-tip').html('').css("left","93px").hide()
            }
                window.location.href="进入上一次登录页面"
            
            
        });
        // 返回登录页 // 已有账号，去登陆
        $('._js_go_login').on('click', function(){
            $('.con-body').hide();
            $('.login-body').show();  
        })
        // 注册账号
        $('#_js_loginin').on('click', function(){
            $('.con-body').hide();
            $('.register-body-1').show();
        });
        // 完成注册
        $('#_js_RegStep2').on('click', function(){
            // 注册成功以后倒计时
            setTimeout("lazyGo();", 1000);
            function lazyGo() {
                var sec = $("#sec").text();
                $("#sec").text(--sec);
                if (sec > 0){
                    setTimeout("lazyGo();", 1000);
                }else{
                   window.location.href="完成注册";
                }
            }
        });
        $('.tip-box-s-d').on('click', function(){
            window.location.href="完成注册";
        })
    }
}